name: Update JavaDoc

on: push

jobs:
  javadoc:
    runs-on: ubuntu-latest

    permissions:
      # Give the default GITHUB_TOKEN write permission to commit and push the
      # added or changed files to the repository.
      contents: write

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - uses: actions/setup-java@v4
        name: Setup Java 8
        with:
          distribution: 'temurin' # See 'Supported distributions' for available options
          java-version: '8'

      - name: Generate JavaDoc
        run: ./gradlew javadoc

      - uses: stefanzweifel/git-auto-commit-action@v6
        with:
          # Optional. Commit message for the created commit.
          # Defaults to "Apply automatic changes"
          commit_message: Automated Change
      
          # Optional. Remote branch name where commit is going to be pushed to. 
          # Defaults to the current branch.
          branch: rrdc-javadocs
      
          commit_options: '--no-verify --signoff'
      
          repository: Nostalgica-Reverie/Website
          file_pattern: 'build/docs/javadoc/*'
      
          commit_user_name: RRDiscordBridge JavaDoc Action # defaults to "github-actions[bot]"
      
          # Optional. Option used by `git-status` to determine if the repository is 
          # dirty. See https://git-scm.com/docs/git-status#_options
          status_options: '--untracked-files=no'
      
          # Optional. Options used by `git-add`.
          # See https://git-scm.com/docs/git-add#_options
          add_options: '-u'
      
          # Optional. Options used by `git-push`.
          # See https://git-scm.com/docs/git-push#_options
          push_options: '--force'
          
          # Optional. Disable dirty check and always try to create a commit and push
          skip_dirty_check: true    
      
          # Optional. Prevents the shell from expanding filenames. 
          # Details: https://www.gnu.org/software/bash/manual/html_node/Filename-Expansion.html
          disable_globbing: true
